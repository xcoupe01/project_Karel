<html>
<head>
    <title>Karel 3D</title>
    <link rel="stylesheet" href="css/main.css"/>
    <meta charset="utf-8"/>
</head>
<body>
    <div id="main">
        <canvas id="roomCanvas"></canvas>
        <div id="blocklyArea">
            <div id="blocklyDiv"></div>
        </div>
        <div id="textEditor">prikaz pokus1
    vpravo
    krok  
    krok  
    poloz
konec


prikaz pokus2
    krok
    krok
    krok
    oznac
konec


prikaz udelej_pokus
    udelej 3 krat
        krok
        udelej 2 krat 
            poloz
        *udelej
        vlevo
    *udelej
    oznac
konec


prikaz while_test
    vpravo
    dokud neni zed
        krok
    *dokud
konec


prikaz test_IF
    dokud neni cihla
        kdyz je zed
        tak 
            vlevo
        jinak 
            krok
        *kdyz
    *dokud
    pokus2
konec


podminka podminka1
    krok
    kdyz je cihla
    tak
        pravda
    jinak  
        nepravda
    *kdyz
    vlevo
    vlevo
    krok
    vlevo
    vlevo
konec


prikaz pokus_podminka
    dokud neni podminka1
        krok
    *dokud
    kdyz je podminka1
    tak
        oznac
    jinak
        poloz
    *kdyz
konec


prikaz rekurze_test
    krok
    krok
    kdyz je zed
    tak 
        vlevo
        vlevo
    jinak
        rekurze_test
    *kdyz
    krok
konec</div>
    </div>
</body>

<input type="button" value="run" id="run">
<input type="button" value="stop" id="stop">
<input type="button" value="test" id="test">

<!-- ace settings - best works here -->
<script src="js/ace-min/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
    var editor = ace.edit("textEditor");
    //editor.setTheme("ace/theme/github");
    //editor.getSession().setMode("ace/mode/text");
    //editor.setTheme("ace/chrome");
    //editor.setTheme("ace/theme/tommorrow");
    editor.getSession().setMode("ace/mode/karel");
    //document.getElementById('deska').onkeydown = function(e) { 
</script>


<!-- blockly settings -->
<script src="js/blockly/blockly_compressed.js"></script>
<script src="js/blockly/karel_blocks.js"></script>
<script src="js/blockly/msg/js/en.js"></script>
<xml xmlns="https://developers.google.com/blockly/xml" id="toolbox" style="display: none">
    <category name="zaklad" color="0">
        <block type="base_function">
            <field name="NAME"/>
        </block>
        <block type="base_condition">
            <field name="NAME"/>
        </block>
    </category>
    <category name="funkce" color="90">
        <block type="function_step"></block>
        <block type="function_right"></block>
        <block type="function_left"></block>
        <block type="function_place"></block>
        <block type="function_pick"></block>
        <block type="function_placemark"></block>
        <block type="function_unmark"></block>
        <block type="function_true"></block>
        <block type="function_false"></block>
    </category>
    <category name="rizeni toku" color="180">
        <block type="control_repeat">
            <field name="NAME">0</field>
        </block>
        <block type="control_while">
            <field name="conditionPrefix">optionIs</field>
        </block>
        <block type="control_if">
            <field name="coditionPrefix">oprtionIs</field>
        </block>
        <block type="control_ifelse">
            <field name="conditionPrefix">optionIs</field>
        </block>
    </category>
    <category name="podminky" color="270">
        <block type="condition_brick"></block>
        <block type="condition_wall"></block>
        \<block type="condition_mark"></block>
    </category>
</xml>
<script>
    var blocklyArea = document.getElementById('blocklyArea');
    var blocklyDiv = document.getElementById('blocklyDiv');
    var workspace = Blockly.inject(blocklyDiv,
        {toolbox: document.getElementById('toolbox')});
    var onresize = function(e) {
        // Compute the absolute coordinates and dimensions of blocklyArea.
        var element = blocklyArea;
        var x = 0;
        var y = 0;
        do {
            x += element.offsetLeft;
            y += element.offsetTop;
            element = element.offsetParent;
        } while (element);
        // Position blocklyDiv over blocklyArea.
        blocklyDiv.style.left = x + 'px';
        blocklyDiv.style.top = y + 'px';
        blocklyDiv.style.width = blocklyArea.offsetWidth + 'px';
        blocklyDiv.style.height = blocklyArea.offsetHeight + 'px';
        Blockly.svgResize(workspace);
    };
    window.addEventListener('resize', onresize, false);
    onresize();
    Blockly.svgResize(workspace);
</script>


<script type="module" src="js/main.js"></script>

</html>